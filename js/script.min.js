var linkMap=document.querySelector(".map"),linkWriteUs=document.querySelector(".write-us"),popupMap=document.querySelector(".modal-map"),popupWriteUs=document.querySelector(".modal-write-us"),closeMap=popupMap.querySelector(".btn-close"),closeWriteUs=popupWriteUs.querySelector(".btn-close"),form=popupWriteUs.querySelector("form"),userName=popupWriteUs.querySelector(".name"),email=popupWriteUs.querySelector("[name=email]"),letter=popupWriteUs.querySelector("[name=text-mail]"),isStorageSupport=!0,storage="",overlay=document.querySelector(".modal-overlay");try{storage=localStorage.getItem("name")}catch(err){isStorageSupport=!1}linkMap.addEventListener("click",function(e){e.preventDefault(),popupMap.classList.add("modal-show"),overlay.classList.add("modal-overlay-show")}),closeMap.addEventListener("click",function(e){e.preventDefault(),popupMap.classList.remove("modal-show"),overlay.classList.remove("modal-overlay-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popupMap.classList.contains("modal-show")&&(popupMap.classList.remove("modal-show"),overlay.classList.remove("modal-overlay-show")))}),overlay.addEventListener("click",function(e){e.preventDefault(),popupMap.classList.remove("modal-show"),overlay.classList.remove("modal-overlay-show")}),linkWriteUs.addEventListener("click",function(e){e.preventDefault(),popupWriteUs.classList.add("modal-show"),overlay.classList.add("modal-overlay-show"),storage?(userName.value=storage,email.focus()):userName.focus()}),closeWriteUs.addEventListener("click",function(e){e.preventDefault(),popupWriteUs.classList.remove("modal-show"),popupWriteUs.classList.remove("modal-error"),overlay.classList.remove("modal-overlay-show")}),form.addEventListener("submit",function(e){userName.value&&email.value&&letter.value?isStorageSupport&&localStorage.setItem("userName",userName.value):(e.preventDefault(),popupWriteUs.classList.remove("modal-error"),popupWriteUs.offsetWidth=popupWriteUs.offsetWidth,popupWriteUs.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popupWriteUs.classList.contains("modal-show")&&(popupWriteUs.classList.remove("modal-show"),popupWriteUs.classList.remove("modal-error"),overlay.classList.remove("modal-overlay-show")))}),overlay.addEventListener("click",function(e){e.preventDefault(),popupWriteUs.classList.remove("modal-show"),popupWriteUs.classList.remove("modal-error"),overlay.classList.remove("modal-overlay-show")});